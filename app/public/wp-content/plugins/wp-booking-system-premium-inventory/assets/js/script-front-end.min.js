jQuery((function($){$(document).on("wpbs_dates_selected",(function(event,$calendar_instance){if(void 0===$calendar_instance.find(".wpbs-container").data("start_date")||""==$calendar_instance.find(".wpbs-container").data("start_date"))return!1;if(start_date=new Date($calendar_instance.find(".wpbs-container").data("start_date")),void 0===$calendar_instance.find(".wpbs-container").data("end_date")||""==$calendar_instance.find(".wpbs-container").data("end_date"))return!1;if(end_date=new Date($calendar_instance.find(".wpbs-container").data("end_date")),!start_date||!end_date)return!1;$calendar=$calendar_instance.find(".wpbs-container");var data={action:"wpbs_get_available_inventory"};data.start_date=start_date.getTime(),data.end_date=end_date.getTime(),data.calendar_id=$calendar.data("id"),data.limit=$calendar_instance.find(".wpbs-form-field-inventory-limit").val();var initial_value=$calendar_instance.find(".wpbs-form-field-inventory-dropdown").val();$.post(wpbs_inv_ajax.ajaxurl,data,(function(response){max_inventory=parseInt(response),$calendar_instance.find(".wpbs-form-field-inventory-maximum").val(max_inventory),$calendar_instance.find(".wpbs-form-field-inventory-dropdown option").remove(),$calendar_instance.find(".wpbs-form-field-inventory-dropdown").data("placeholder-enabled")&&$calendar_instance.find(".wpbs-form-field-inventory-dropdown").append($("<option>",{text:$calendar_instance.find(".wpbs-form-field-inventory-dropdown").data("placeholder-enabled"),selected:!0,disabled:!0}));for(var i=1;i<=max_inventory;i++)$calendar_instance.find(".wpbs-form-field-inventory-dropdown").append($("<option>",{value:i,text:i}));initial_value&&$calendar_instance.find(".wpbs-form-field-inventory-dropdown").val(initial_value),$(document).trigger("wpbs_form_updated",[$calendar_instance,$calendar_instance.find(".wpbs-form-container").data("id")])}))})),$(".wpbs-main-wrapper").each((function(){$(document).trigger("wpbs_dates_selected",[$(this)])})),$(document).on("wpbs_dates_deselected",(function(event,$calendar_instance){$calendar_instance.find(".wpbs-form-field-inventory-dropdown option").remove(),$calendar_instance.find(".wpbs-form-field-inventory-dropdown").append($("<option>",{text:$calendar_instance.find(".wpbs-form-field-inventory-dropdown").data("placeholder-disabled"),selected:!0,disabled:!0}))}))}));